repos:
  - repo: local
    hooks:
      - id: mypy
        name: Mypy Type Check (uv run)
        entry: bash -c 'if [ -d src ]; then uv run mypy src; elif rg -n "\\.py(i)?$" > /dev/null; then uv run mypy $(git ls-files "*.py" "*.pyi" 2>/dev/null); else echo "No Python files found; skipping mypy"; fi'
        language: system
        types_or: [python]
        pass_filenames: false

      - id: pytest-unit
        name: Pytest Unit Suite (uv run)
        entry: bash -c 'if [ -d tests/unit ]; then uv run pytest -q tests/unit; elif [ -d tests ]; then uv run pytest -q -k "not integration and not contract"; else echo "No tests found; skipping unit tests"; fi'
        language: system
        types_or: [python]
        pass_filenames: false

      - id: ruff-format
        name: Ruff Format (uv run)
        entry: bash -c 'uv run ruff format'
        language: system
        types_or: [python]
        pass_filenames: false
